/*! dst-web - v0.0.1 - 2014-01-26 */
$(function(){function a(){for(var a=$(".dss-winBox"),b=parseInt(a.eq(0).css("z-index")),c=1;c<a.length;c++)a.eq(c).css("z-index")>parseInt(b)&&(b=a.eq(c).css("z-index"));return parseInt(b)+1}function b(a){a.is(":hidden")?a.show():a.hide()}function c(){$(".dss-top-cont-menu").children("li").click(function(){return $(this).siblings("li").removeClass("active").children("ul").hide().css("width",$(this).parents(".dss-wrap-top-menu-bar").width()),$(this).children("ul").is(":hidden")&&$(this).addClass("active"),$(this).children("ul").show(),f($(this).parents(".dss-winBox")),!1})}function d(a){a.B.on("mousedown",function(a){var b=$(this).parents(".dss-winBox"),c=a.pageY,d=b.height(),f=$(this);return $(document).on("mousemove",function(a){var b=a.pageY-c,e=f.parents(".dss-winBox");return e.css("height",b+d),e.outerHeight()<=320&&e.css("height",320),h(e),!1}),e(),!1}),a.R.on("mousedown",function(a){var b=$(this).parents(".dss-winBox"),c=a.pageX,d=b.width(),f=$(this);return $(document).on("mousemove",function(a){var b=a.pageX-c,e=f.parents(".dss-winBox");e.css("width",b+d);var g=0;return e.outerWidth()<=350&&e.css("width",350),a.pageX+20===$(document).width()&&(g=e.width()),a.pageX+20>$(document).width()&&e.css("width",g),!1}),e(),!1}),a.Rb.on("mousedown",function(a){var b=$(this).parents(".dss-winBox"),c=a.pageX,d=a.pageY,f=b.width(),g=b.height(),i=$(this);return $(document).on("mousemove",function(a){var b=a.pageX-c,e=a.pageY-d,j=i.parents(".dss-winBox");return j.css({width:b+f,height:e+g}),j.outerHeight()<=320&&j.css("height",320),j.outerWidth()<=350&&j.css("width",350),h(j),!1}),e(),!1}),a.T.on("mousedown",function(a){var b=$(this).parents(".dss-winBox"),c=a.pageY,d=b.height(),f=b.offset().top,g=$(this);return $(document).on("mousemove",function(a){var b=c-a.pageY,e=g.parents(".dss-winBox");return e.css("height",b+d),e.offset({top:f-b}),e.outerHeight()<=320&&e.css("height",320).offset({top:f+(d-320)}),e.offset().top<=0&&e.offset({top:0}).css("height",d+f),h(e),!1}),e(),!1}),a.L.on("mousedown",function(a){var b=$(this).parents(".dss-winBox"),c=a.pageX,d=b.width(),f=b.offset().left,g=$(this);return $(document).on("mousemove",function(a){var b=c-a.pageX,e=g.parents(".dss-winBox");return e.css("width",b+d),e.offset({left:f-b}),e.outerWidth()<=350&&(e.css("width",350),e.offset({left:f+(d-350)})),!1}),e(),!1}),a.Rt.on("mousedown",function(a){var b=$(this).parents(".dss-winBox"),c=a.pageX,d=a.pageY,f=b.width(),g=b.height(),i=b.offset().top,j=$(this);return $(document).on("mousemove",function(a){var b=a.pageX-c,e=d-a.pageY,k=j.parents(".dss-winBox");return k.css({width:b+f,height:e+g}),k.offset({top:i-e}),k.outerWidth()<=350&&k.css("width",350),k.outerHeight()<=320&&k.css("height",320).offset({top:i+(g-320)}),k.offset().top<=0&&k.offset({top:0}).css("height",g+i),h(k),!1}),e(),!1}),a.Lt.on("mousedown",function(a){var b=$(this).parents(".dss-winBox"),c=a.pageX,d=a.pageY,f=b.width(),g=b.height(),i=b.offset().top,j=b.offset().left,k=$(this);return $(document).on("mousemove",function(a){var b=c-a.pageX,e=d-a.pageY,l=k.parents(".dss-winBox");return l.css({width:b+f,height:e+g}),l.offset({left:j-b,top:i-e}),l.outerWidth()<=350&&l.css("width",350).offset({left:j+(f-350)}),l.outerHeight()<=320&&l.css("height",320).offset({top:i+(g-320)}),l.offset().top<=0&&l.offset({top:0}).css("height",g+i),h(l),!1}),e(),!1}),a.Lb.on("mousedown",function(a){var b=$(this).parents(".dss-winBox"),c=a.pageX,d=a.pageY,f=b.width(),g=b.height(),i=b.offset().top,j=b.offset().left,k=$(this);return $(document).on("mousemove",function(a){var b=c-a.pageX,e=a.pageY-d,l=k.parents(".dss-winBox");return l.css({width:b+f,height:e+g}),l.offset({left:j-b}),l.outerWidth()<=350&&l.css("width",350).offset({left:j+(f-350)}),l.outerHeight()<=320&&l.css("height",320),l.offset().top<=0&&l.offset({top:0}).css("height",g+i),h(l),!1}),e(),!1})}function e(){$(document).mouseup(function(){$(document).unbind("mousemove"),$(document).unbind("mouseup")})}function f(a){z++,a.css("z-index",z).removeClass("dss-noCurWin").siblings(".dss-winBox").addClass("dss-noCurWin");var b=$("li[thumbwin='"+a.attr("win")+"']");if("0"===a.attr("win").charAt(0)&&1!==a.attr("win").length){var c=b.siblings();b.addClass("hight").removeClass("disabled"),b.parent().next().children("li").removeClass("hover");for(var d=0;d<c.length;d++)"hight"===c.eq(d).attr("class")&&c.eq(d).addClass("disabled");$("#dss-lt-default-icon>li").removeClass("hight"),b.addClass("hight")}else{var e=$("#dss-thumb-icon>li"),f=b.parent().prev().children("li");e.removeClass("hover"),b.addClass("hover");for(var g=0;g<f.length;g++)"hight"===f.eq(g).attr("class")&&f.eq(g).addClass("disabled");f.removeClass("hight")}}function g(a){var b=0,c=0;a.mousedown(function(a){var d=$(this).parents(".dss-winBox").offset();b=a.pageX-d.left,c=a.pageY-d.top;var g=$(this);return f(g.parents(".dss-winBox")),$(document).mousemove(function(a){var d=a.pageX-b,e=a.pageY-c;return g.parents(".dss-winBox").offset({left:d,top:e}),!1}),e(),!1}),a.parents(".dss-winBox").click(function(){f($(this))})}function h(a){$(".dss-menu-rt-unfold")?a.find(".dss-window-content-lt").css("height",a.height()-160):"true"===a.find(".dss-menu-rt-unfold").attr("unfoldOnOff")?a.find(".dss-window-content-lt").css("height",a.height()-160):a.find(".dss-window-content-lt").css("height",a.height()-270)}function i(){var a=new Date,b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate(),e=a.getHours(),f=a.getMinutes();10>e?e="0"+e:e,10>f?f="0"+f:f;var g=b+"/"+c+"/"+d,h=e+":"+f;$("#dss-rt-default li:last").find("em").html(h+"<br/>"+g)}function j(){for(var a=$(".dss-win-title-icon"),b=0;b<a.length;b++){var c=a.eq(b).parents(".dss-winBox").attr("type");switch(c){case"file":a.eq(b).children("i").addClass("dss-icon16-win-title");break;case"txt":a.eq(b).children("i").removeClass().addClass("dss-icon16-txt");break;case"help":a.eq(b).children("i").removeClass().addClass("dss-icon16-txt");break;case"code":a.eq(b).children("i").removeClass().addClass("dss-icon16-txt")}}}function k(){for(var a=$(".dss-winBox"),b=$("#dss-lt-default-icon").children("li"),c=0;c<b.length;c++)b.eq(c).attr("thumbwin","0"+c);for(var d=0;d<a.length;d++){"0"===a.eq(d).attr("win").charAt(0)&&1!==a.eq(d).attr("win").length&&a.eq(d).hide(),$("#dss-thumb-icon>li").eq(d).attr("thumbwin",d);var e=a.eq(d).attr("type"),f=$("li[thumbwin='"+a.eq(d).attr("win")+"']");switch(e){case"file":f.find("a").find("em").children("i").addClass("dss-icon32-bt-file");break;case"txt":f.find("a").find("em").children("i").addClass("dss-icon32-note")}}}function l(){for(var a=["#2d89ef","#0098ab","#0a58c1","#009f00","#da532c","#93009c","#5636b0","#009cae","#2d8aef","#3e17b9"],b=$("#dss-page-cont").find(".dss-rec-b-cont"),c=1;c<b.length-8;c++)b[c].style.backgroundColor=a[c%10]}function m(){var a=$("body"),b=$(".dss-bar");$(".dss-bar-m").width(a.width()-66),b.width(Math.round(a.width()*a.width()/$("#dss-page-cont").width()))}function n(a){0>a?a=0:a>$(".dss-bar-m").outerWidth()-$(".dss-bar").outerWidth()&&(a=$(".dss-bar-m").outerWidth()-$(".dss-bar").outerWidth()),$(".dss-bar").css("left",a);var b=a/($(".dss-bar-m").outerWidth()-$(".dss-bar").outerWidth());$("#dss-page-cont").css("left",($("#dss-page-wrap").outerWidth()-$("#dss-page-cont").outerWidth())*b)}var o=$(".dss-win-inner"),p=o.find(".dss-window-resize-b"),q=o.find(".dss-window-resize-r"),r=o.find(".dss-window-resize-t"),s=o.find(".dss-window-resize-l"),t=o.find(".dss-window-resize-rb"),u=o.find(".dss-window-resize-rt"),v=o.find(".dss-window-resize-lt"),w=o.find(".dss-window-resize-lb"),x={B:p,R:q,Rb:t,T:r,L:s,Rt:u,Lt:v,Lb:w},y=$(".dss-top-tool-custome-list"),z=$("winBox").length;g($(".dss-title-bar")),k(),d(x),j(),i(),setInterval(function(){i()},1e3),c(),$(".dss-minwin-btn").click(function(){var a=$(this).parents(".dss-winBox");a.hide();var b=$("li[thumbwin='"+a.attr("win")+"']");return b.removeClass("hover"),b.is(":hidden")&&b.show(),"0"===b.attr("thumbwin").charAt(0)&&1!==b.attr("thumbwin").length&&b.addClass("disabled"),!1}),$(".dss-closewin-btn").click(function(){var a=$(this).parents(".dss-winBox");return a.hide(),"0"===a.attr("win").charAt(0)&&1!==a.attr("win").length?$("li[thumbwin='"+a.attr("win")+"']").removeClass():$("li[thumbwin='"+a.attr("win")+"']").hide(),!1}),$("#dss-thumb-icon").children("li").click(function(){z=a();var b=$(".dss-winBox[win='"+$(this).attr("thumbwin")+"']"),c=b.css("z-index");$(this).children("div").fadeOut(),$(this).addClass("hover").siblings().removeClass("hover");for(var d=$(this).parents("ul").prev().children("li"),e=0;e<d.length;e++)$(".dss-winBox[win='"+d.eq(e).attr("thumbwin")+"']").is(":visible")&&d.eq(e).removeClass("height").addClass("disabled");return 0===c?b.css("z-index",z).show().removeClass("dss-noCurWin").siblings().addClass("dss-noCurWin"):c===z-1&&b.is(":visible")?b.hide():(b.is(":hidden")||z>c&&b.is(":visible"))&&b.css("z-index",z).show().removeClass("dss-noCurWin").siblings().addClass("dss-noCurWin"),clearTimeout($(this)[0].timer),!1}).mouseenter(function(){var a=$(this);a[0].show=setTimeout(function(){a.children("div").fadeIn().end().siblings().children("div").fadeOut().children("div").children("div").removeClass("hov")},300),clearTimeout($(this)[0].timer)}).mouseleave(function(){var a=$(this);a[0].timer=setTimeout(function(){a.children("div").hide()},300)}),$(".dss-tool-bar").children("li").hover(function(){var a=$(this).children("i").attr("class").split("-");return"disabled"==a[a.length-1]?!1:($(this).addClass("hover").siblings().removeClass("hover"),void 0)},function(){$(this).removeClass("hover")}).children("i").attr("onOff",!0).click(function(){return $(".dss-top-menu-cont").children("li").attr("onOff",!0).removeClass("hover").find("ul").hide(),$(this).parent().siblings().children("i").attr("onOff",!0).next("ul").hide(),"true"===$(this).attr("onOff")?($(".dss-sub-tool").hide().prev("i").attr("onOff",!0),$(this).next().show(),$(this).attr("onOff",!1)):($(this).next().hide(),$(this).attr("onOff",!0)),!1}).next("ul").children("li").click(function(){return $(this).parent("ul").hide(),$(this).parent("ul").prev("i").attr("onOff",!0),!1}),$("#dss-wrap-bottom-bar li").children("div").mouseenter(function(a){$(this).show().children("div").addClass("hov").find("strong").show().parents("li").siblings().find("strong").hide().parents("li").find("div").removeClass("hov"),clearTimeout($(this).parents("li")[0].timer),clearTimeout($(this)[0].timer),a.stopPropagation()}).click(function(){return z=a(),$(this).hide(),$(this).parent().addClass("hover").siblings().removeClass("hover"),$(".dss-winBox[win='"+$(this).parent().attr("thumbwin")+"']").show().css("z-index",z).removeClass("dss-noCurWin").siblings().addClass("dss-noCurWin"),clearTimeout($(this)[0].timer),!1}).mouseleave(function(a){$(this).find("div").removeClass("hov").parents("li").find("strong").hide();var b=$(this);b[0].timer=setTimeout(function(){b.hide()},500),a.stopPropagation()}).find("strong").click(function(){var a=$(".dss-winBox[win='"+$(this).parents("li").attr("thumbwin")+"']");return"dss-lt-default-icon"===$(this).parents("ul").attr("id")?(a.hide(),$(this).parents("li").removeClass().children("div").hide(),!1):($(this).parents("li").hide(),a.hide(),!1)}),$("#dss-lt-default-icon").children("li").click(function(){var b=$(".dss-winBox[win='"+$(this).attr("thumbwin")+"']"),c=parseInt(b.css("z-index"));z=a(),b.is(":hidden")?(b.show().css("z-index",z).removeClass("dss-noCurWin").siblings().addClass("dss-noCurWin"),$(this).addClass("hight").removeClass("disabled").parents("ul").next().children("li").removeClass("hover")):b.is(":visible")&&(c===z-1?(b.hide(),$(this).addClass("disabled").removeClass("hight")):z>c&&($(this).addClass("hight").removeClass("disabled").siblings().removeClass("hight").parents("ul").next().children("li").removeClass("hover"),b.css("z-index",z).show().removeClass("dss-noCurWin").siblings().addClass("dss-noCurWin")));for(var d=$(this).siblings(),e=0;e<d.length;e++)$(".dss-winBox[win='"+d.eq(e).attr("thumbwin")+"']").is(":visible")&&d.eq(e).removeClass("hight").addClass("disabled")}).mouseenter(function(){var a=$(".dss-winBox[win='"+$(this).attr("thumbwin")+"']");if("dss-lt-default-icon"!==$(this).parent().attr("id")||!a.is(":hidden")){var b=$(this);b[0].show=setTimeout(function(){b.children("div").fadeIn().end().siblings().children("div").fadeOut().children("div").children("div").removeClass("hov")},500),clearTimeout($(this)[0].timer)}}).mouseleave(function(){var a=$(this);a[0].timer=setTimeout(function(){a.children("div").hide()},500)}),y.click(function(a){var c=$(this).find("div");b(c),a.stopPropagation()}),$("#dss-zoom-wallpaper-grid").click(function(){y.find("div").hide(),$(".dss-site-input").hide(),$(".dss-site").removeClass("dss-site-act"),$(".dss-sub-cont-file").hide(),$(".dss-wrap-tool2-sub").find("ul").hide(),$(".dss-top-cont-menu").children("li").children("ul").hide(),$("#dss-thumb-icon").children("li").children("div").hide(),$(".dss-top-menu-cont>li").children("ul").hide(),$(".dss-tool-bar").find(".dss-sub-tool").hide().end().find(".dss-ico-tool-custome").attr("onOff",!0),console.log("document"),$(".dss-top-menu-cont").attr("onOff",!1).children("li").attr("onOff",!0).removeClass("hover")}),$(".dss-window-content-lt i").hover(function(){$(this).parent().siblings().find("i").removeClass("dss-w-c-l-act"),$(this).addClass("dss-w-c-l-act")},function(){$(this).removeClass("dss-w-c-l-act")}),$(".dss-site").on("click",function(){var a=$(this).find("span").html();return $(this).find("input").val(a),$(this).find(".dss-site-input").show(),$(this).find("input").select(),$(this).addClass("dss-site-act"),!1}),$(".dss-top-menu-lt").children("h2").click(function(){return b($(this).next()),f($(this).parents(".dss-winBox")),!1}),$(".dss-top-tool2-sub").click(function(){return b($(this).find("ul")),!1}),$(".dss-sub-file>li").mouseover(function(){var a=$(this).parent().next($(".dss-file-collec")).children("div");a.hide(),a.eq($(this).index()+1).show(),$(this).addClass("hover").siblings().removeClass("hover"),$(this).index()===a.length-1&&a.eq(0).show()}).mouseout(function(){$(this).addClass()}),$(".dss-menu-rt-unfold").attr("unfoldOnOff",!0).click(function(){var a=$(this).parents(".dss-winBox"),b=a.find(".dss-sub-menu-fix");"true"===$(this).attr("unfoldOnOff")?(a.find(".dss-sub-homepage").hide().end().find(".dss-wrap-top-menu-bar").next(".dss-sub-homepage").show(),$(this).attr("unfoldOnOff",!1).removeClass("dss-menu-rt-unfold-down").addClass("dss-menu-rt-unfold-up"),a.find(".dss-sub-menu-fix").empty().end().find(".dss-wrap-top-menu-bar").find(".dss-sub-homepage").clone().appendTo(b).show(),a.find(".dss-window-content-lt").css("height",a.height()-270)):($(this).removeClass("dss-menu-rt-unfold-up").addClass("dss-menu-rt-unfold-down").attr("unfoldOnOff",!0).parents(".dss-winBox").find(".dss-sub-homepage").hide(),a.find(".dss-window-content-lt").css("height",a.height()-150))}),$(".dss-top-menu-cont").children("li").click(function(){return"true"===$(this).attr("onOff")?($(".dss-top-menu-cont>li").children("ul").hide(),$(this).siblings().removeClass("hover").end().children("ul").show().end().addClass("hover").attr("onOff",!1).parent().attr("onOff",!0)):($(this).removeClass("hover").children("ul").hide(),$(".dss-top-menu-cont").children("li").andSelf().attr("onOff",!0)),f($(this).parents(".dss-winBox")),$(".dss-tool-bar").find("ul").hide().prev("i").attr("onOff",!0),!1}).mouseover(function(){for(var a="",b=0;b<$(".dss-top-menu-cont>li").length;b++)a+=$($(".dss-top-menu-cont>li")[b]).attr("onOff");-1!==a.indexOf("false")&&"true"===$(this).parent().attr("onOff")&&($(".dss-top-menu-cont>li").children("ul").hide(),$(this).siblings().removeClass("hover").end().addClass("hover").attr("onOff",!1).children("ul").show())}).children("ul").hide().end().attr("onOff",!0),$("#dss-return-metro").hover(function(){$(this).addClass("dss-re-metro-hover")},function(){$(this).removeClass()}).click(function(){$("#dss-zoom-wallpaper-grid").fadeOut(100),$("#dss-page").show()}),$(".dss-ico-tool-custome").next("ul").children("li").attr("choosed",!1).click(function(){"false"===$(this).attr("choosed")?($(this).children("i").addClass("dss-ico-choose"),$(this).attr("choosed",!0)):($(this).children("i").removeClass("dss-ico-choose"),$(this).attr("choosed",!1))});var A=document.getElementById("dss-zoom-wallpaper-grid");A.onmousewheel=function(){return!1},l(),$("#dss-page-cont").find(".dss-rec-b-cont").eq(0).click(function(){$(this).parents("#dss-page").fadeOut().prev().fadeIn()}),m(),window.onresize=function(){m()},$(".dss-bar-l").add($(".dss-bar-r")).add($(".dss-bar")).hover(function(){$(this).addClass("dss-bg-scorll-over").removeClass("dss-bg-over")},function(){$(this).removeClass("dss-bg-scorll-over").addClass("dss-bg-over")}),$(".dss-bar-l").mousedown(function(){var a=$(".dss-bar"),b=a.position().left,c=parseInt(a.outerWidth()/50);a.css("left",b-c+"px"),n(a.position().left)}),$(".dss-bar-r").mousedown(function(){var a=$(".dss-bar"),b=a.position().left,c=parseInt(a.outerWidth()/50);a.css("left",b+c+"px"),n(a.position().left)}),$(".dss-bar").mousedown(function(a){var b=a.clientX-$(this).position().left;document.onmousemove=function(a){var c=a||window.event,d=c.clientX-b;n(d)},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}})});
/*! dst-web update time： 2014-01-26 */